{
	"$schema": "http://json-schema.org/draft-07/schema",
	"title": "Recipe",
	"allOf": [
		{
			"properties": {
				"type": {
					"description": "A namespaced ID indicating the type of serializer of the recipe.",
					"type": "string",
					"anyOf": [
						{
							"enum": [
								"blasting",
								"campfire_cooking",
								"crafting_shaped",
								"crafting_shapeless",
								"smelting",
								"smithing",
								"smoking",
								"stonecutting"
							]
						},
						{
							"pattern": "^crafting_special_.*"
						}
					]
				},
				"group": {
					"type": "string",
					"description": "A string identifier. Used to group multiple recipes together in the recipe book."
				}
			}
		},
		{
			"if": {
				"properties": {
					"type": {
						"enum": [
							"blasting",
							"campfire_cooking",
							"smelting",
							"smoking"
						]
					}
				}
			},
			"then": {
				"$ref": "./general.json#/definitions/cooking_recipe"
			}
		},
		{
			"if": {
				"properties": {
					"type": {
						"const": "crafting_shaped"
					}
				}
			},
			"then": {
				"properties": {
					"pattern": {
						"description": "A list of single-character keys used to describe a pattern for shaped crafting. Each row in the crafting grid is one string in this list containing 3 or less keys. All strings in this list need to have the same amount of keys. A space can be used to indicate an empty spot.",
						"type": "array",
						"minItems": 3,
						"maxItems": 3,
						"items": {
							"type": "string" // TODO RECIPE_KEYS
						}
					},
					"key": {
						"propertyNames": {
							// TODO RECIPE_KEYS
						},
						"patternProperties": {
							".+": {
								"additionalProperties": false,
								"properties": {
									"item": {
										"description": "An item ID.",
										"type": "string" // TODO ITEM_ID
									},
									"tag": {
										"description": "An item tag.",
										"type": "string" // TODO ITEM_TAG
									}
								}
							}
						}
					},
					"result": {
						"description": "The output item of the recipe.",
						"additionalProperties": false,
						"properties": {
							"count": {
								"description": "Optional. The amount of the item. Falls back to 1 if the field is absent.",
								"type": "integer"
							},
							"item": {
								"description": "An item ID.",
								"type": "string" // TODO ITEM_ID
							}
						}
					}
				}
			}
		},
		{
			"if": {
				"properties": {
					"type": {
						"const": "crafting_shapeless"
					}
				}
			},
			"then": {
				"properties": {
					"ingredients": {
						"description": "A list of entries for this shapeless crafting recipe.",
						"type": "array",
						"minItems": 1,
						"maxItems": 9,
						"items": {
							"anyOf": [
								{
									"description": "An entry made of a single ingredient.",
									"additionalProperties": false,
									"properties": {
										"item": {
											"description": "An item ID.",
											"type": "string" // TODO ITEM_ID
										},
										"tag": {
											"description": "An item tag.",
											"type": "string" // TODO ITEM_TAG
										}
									}
								},
								{
									"description": "An entry made of a list of acceptable ingredients.",
									"type": "array",
									"items": {
										"description": "An acceptable ingredient.",
										"additionalProperties": false,
										"properties": {
											"item": {
												"description": "An item ID.",
												"type": "string" // TODO ITEM_ID
											},
											"tag": {
												"description": "An item tag.",
												"type": "string" // TODO ITEM_TAG
											}
										}
									}
								}
							]
						}
					},
					"result": {
						"description": "The output item of the recipe.",
						"additionalProperties": false,
						"properties": {
							"count": {
								"description": "Optional. The amount of the item. Falls back to 1 if the field is absent.",
								"type": "integer"
							},
							"item": {
								"description": " An item ID.",
								"type": "string" // TODO ITEM_ID
							}
						}
					}
				}
			}
		},
		{
			"if": {
				"properties": {
					"type": {
						"const": "smithing"
					}
				}
			},
			"then": {
				"properties": {
					"base": {
						"description": " Ingredient specifying an item to be upgraded.",
						"additionalProperties": false,
						"properties": {
							"item": {
								"description": "An item ID.",
								"type": "string" // TODO ITEM_ID
							},
							"tag": {
								"description": "An item tag.",
								"type": "string" // TODO ITEM_TAG
							}
						}
					},
					"addition": {
						"additionalProperties": false,
						"properties": {
							"item": {
								"description": "An item ID.",
								"type": "string" // TODO ITEM_ID
							},
							"tag": {
								"description": "An item tag.",
								"type": "string" // TODO ITEM_TAG
							}
						}
					},
					"result": {
						"additionalProperties": false,
						"properties": {
							"item": {
								"description": "An item ID.",
								"type": "string" // TODO ITEM_ID
							},
							"tag": {
								"description": "An item tag.",
								"type": "string" // TODO ITEM_TAG
							}
						}
					}
				}
			}
		},
		{
			"if": {
				"properties": {
					"type": {
						"const": "stonecutting"
					}
				}
			},
			"then": {
				"properties": {
					"ingredient": {
						"anyOf": [
							{
								"description": "The ingredient.",
								"properties": {
									"item": {
										"description": "An item ID.",
										"type": "string" // TODO ITEM_ID
									},
									"tag": {
										"description": "An item tag.",
										"type": "string" // TODO ITEM_TAG
									}
								}
							},
							{
								"description": "The list of ingredients.",
								"type": "array",
								"items": {
									"description": "An acceptable ingredient.",
									"properties": {
										"item": {
											"description": "An item ID.",
											"type": "string" // TODO ITEM_ID
										},
										"tag": {
											"description": "An item tag.",
											"type": "string" // TODO ITEM_TAG
										}
									}
								}
							}
						]
					},
					"result": {
						"description": "The output item of the recipe.",
						"type": "string" // TODO ITEM_ID
					},
					"count": {
						"description": "The amount of the output item.",
						"type": "integer"
					}
				}
			}
		}
	]
}
